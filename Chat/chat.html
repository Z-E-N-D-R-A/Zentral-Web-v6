<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width = device-width, initial-scale = 1.0" />
  <title>Zentral-Web | Chat</title>

  <link href="../Assets/Icon.png" rel="icon">
  <link rel="stylesheet" href="../CSS/chat.css">
  <!-- <link rel="stylesheet" href="../CSS/style.css"> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>

<body>
  <!-- <header>
    <div class="logo">
      <img src="../Assets/Logo.png" alt="Logo">
      <span>Zendra クレイジー</span>
    </div>
    <nav class="nav-links">
      <a href="index.html">Home</a>
      <a href="videos.html">Videos</a>
      <a href="zentral.html"><b>Zentral</b></a>
      <div class="dropdown">
        <button class="dropbtn">More ▾</button>
        <div class="dropdown-content">
          <a href="projects.html">Projects</a>
          <a href="newsletter.html">Newsletter</a>
          <a href="others.html">Others</a>
        </div>
      </div>
    </nav>
    <div class="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </header> -->

  <div class="chat-container">
    <header class="chat-header">
      <div class="brand">Zentral Live Chat</div>
      <div class="online" id="onlineCount">0 online</div>
      <div id="newMsgIndicator" class="new-msg-indicator hidden">
        New messages ↓
      </div>
    </header>

    <main id="chatArea" class="chat-area">
      <div id="loadMoreContainer">
        <button id="loadMoreBtn">Load older messages</button>
        <div id="spinner" class="spinner" style="display:none;"></div>
      </div>
    
      <div id="messages" class="messages"></div>
    </main>

    <aside class="sidebar">
      <div class="who-title">Online</div>
      <div id="who" class="who-list"></div>
    </aside>

    <form id="controls" class="controls" autocomplete="off">
      <input id="name" class="input name-input" placeholder="Enter your name" maxlength="30" />
      <input id="message" class="input message-input" placeholder="Type your message..." maxlength="250" />
      <button id="sendBtn" class="btn send-btn" type="button">Send</button>
    </form>
  </div>

  <div id="prompt" class="prompt">
    <div class="prompt-box">
      <h3>Welcome — pick a display name</h3>
      <input id="promptName" placeholder="Your name (or Guest)" maxlength="30" />
      <div class="prompt-actions">
        <button id="joinBtn" class="btn">Join Chat</button>
      </div>
  
      <!-- inside your prompt / join box, next to or below your existing name input -->
      <div id="recovery-row" style="margin-top:14px; display:flex; gap:8px; align-items:center;">
        <!-- Restore input -->
        <input id="recoveryInput" placeholder="Enter recovery code"
          style="padding:8px; border-radius:6px; border:1px solid #ccc;">
        <button id="restoreBtn" style="padding:8px 12px; border-radius:6px; cursor:pointer;">Restore</button>
      </div>
  
      <!-- After successful join (hidden until join) show code + copy -->
      <div id="recoveryDisplay" style="margin-top:12px; display:none; gap:8px; align-items:center;">
        <span style="background:#111; color:#fff; padding:8px 12px; border-radius:6px;" id="recoveryCodeText"></span>
        <button id="copyRecoveryBtn" style="padding:6px 10px; border-radius:6px; cursor:pointer;">Copy</button>
        <small style="color:#ccc; margin-left:8px;">Save this code to restore your identity later.</small>
      </div>
    </div>
  </div>

  <!-- <footer>
    <div class="footer-socials">
      <a href="https://www.youtube.com/@zendra_brawl" target="_blank"><i class="fa-brands fa-youtube"></i></a>
      <a href="https://www.instagram.com/zendra_brawl/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
      <a href="http://www.tiktok.com/@zendra_brawl" target="_blank"><i class="fa-brands fa-tiktok"></i></a>
      <a href="https://discord.gg/VbUFdhEjNq" target="_blank"><i class="fa-brands fa-discord"></i></a>
      <a href="https://www.twitch.tv/zendra_brawl" target="_blank"><i class="fa-brands fa-twitch"></i></a>
      <a href="https://twitter.com/zendra_brawl" target="_blank"><i class="fa-brands fa-x-twitter"></i></a>
    </div>
    2025 Zentral-Web | Powered by KuraWorks
  </footer> -->

  <script src="chat.js"></script>
  <!-- <script>
    const headerEl = document.querySelector('header');
    window.addEventListener('scroll', () => {
      const y = window.scrollY;
      const maxOpacity = 0.45;
      const maxBlur = 12;
      const pct = Math.min(y / 300, 1);
      headerEl.style.background = `rgba(0,0,0,${(pct * maxOpacity).toFixed(3)})`;
      headerEl.style.backdropFilter = `blur(${(pct * maxBlur).toFixed(2)}px)`;

      if (y > 10) headerEl.classList.add('scrolled'); else headerEl.classList.remove('scrolled');
    });

    const dropdown = document.querySelector('.dropdown');
    const dropbtn = dropdown.querySelector('.dropbtn');
    const dropdownContent = dropdown.querySelector('.dropdown-content');
    let isDropdownOpen = false;

    dropbtn.addEventListener('click', (e) => {
      e.stopPropagation();
      isDropdownOpen = !isDropdownOpen;
      dropdown.classList.toggle('show', isDropdownOpen);
    });
    dropdown.addEventListener('mouseenter', () => {
      dropdown.classList.add('show');
      isDropdownOpen = true;
    });
    dropdown.addEventListener('mouseleave', (e) => {
      const rect = dropdownContent.getBoundingClientRect();
      const buffer = 60;
      const checkMouse = (ev) => {
        if (ev.clientX < rect.left - buffer || ev.clientX > rect.right + buffer || ev.clientY < rect.top - buffer || ev.clientY > rect.bottom + buffer) {
          dropdown.classList.remove('show');
          isDropdownOpen = false;
          window.removeEventListener('mousemove', checkMouse);
        }
      };
      window.addEventListener('mousemove', checkMouse);
    });

    window.addEventListener('scroll', () => {
      dropdown.classList.remove('show');
      isDropdownOpen = false;
    });
    document.addEventListener('click', (e) => {
      if (!dropdown.contains(e.target)) {
        dropdown.classList.remove('show');
        isDropdownOpen = false;
      }
    });

    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      navLinks.classList.toggle('active');
    });
  </script> -->
</body>
</html>
